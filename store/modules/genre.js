////////////////////////////////////////////////////////////////////////////////////////////////////
// state
////////////////////////////////////////////////////////////////////////////////////////////////////
const defaultState = () => {
  return {
    genres: [],
    checkedGenre: ''
  }
}

export const state = () => defaultState()

////////////////////////////////////////////////////////////////////////////////////////////////////
// getters
////////////////////////////////////////////////////////////////////////////////////////////////////
export const getters = {
  genres (state) {
    return state.genres
  }
}

////////////////////////////////////////////////////////////////////////////////////////////////////
// mutations
////////////////////////////////////////////////////////////////////////////////////////////////////
export const mutations = {
  // ==================================================
  // ステート初期化
  // ==================================================
  setDefaultState (state) {
    Object.assign(state, defaultState())
  },
  // ==================================================
  // データロード
  // ==================================================
  setGenres (state, payload) {
    state.genres = payload
  }
}

////////////////////////////////////////////////////////////////////////////////////////////////////
// actions
////////////////////////////////////////////////////////////////////////////////////////////////////
export const actions = {
  // ==================================================
  // ステート初期化
  // ==================================================
  getDefaultState ({ commit }) {
    commit('setDefaultState')
  },
  // ==================================================
  // データロード
  // ==================================================
  async getGenres ({ state, commit }) {
    if (!state.genres.length) {
      await this.$axios.$get('/api/v1/genres')
        .then((genres) => {
          commit('setGenres', genres)
        })
    }
  }
}
